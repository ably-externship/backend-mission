{% extends 'base.html' %}

{% block content %}

{% for message in messages %}
    <div class="alert {{ message.tags }} alert-auto-dismissible alert-dismissible notification-container text-center" role="alert">
        {{ message }}
    </div>
{% endfor %}
<div class='container px-4'>
    <form action = "{% url 'cart:purchase' %}" method='get'>
    <table class="table">
        <thead>
          <tr>

            <th scope="col">선택</th>
            <th scope="col">사진</th>
            <th scope="col">상품</th>
            <th scope="col">옵션</th>
            <th scope="col">개수</th>
            <th scope="col">삭제</th>
            <th scope="col">가격</th>
          </tr>
        </thead>
        <tbody>
            {% for cart in object_list %}
            <tr>
                <td><input id = "selectd" type = "checkbox" name ="selected" value = "{{cart.id}}"></td>
                <td > <img src = "{{ cart.product.product.image.url }}" width="100px" height="100px"> </td>
                <td>{{ cart.product.product.name }}</td>
                <td>{{ cart.product.option_1_display_name }}  {{ cart.product.option_2_display_name }}</td>
                <td><form action = "{% url 'cart:update' %}"><input  type='number' name ='number' value = "{{ cart.quantity }}"> 
                    <button type= 'submit' name='id' value ="{{ cart.id }}" class='btn btn-outline-success'>update
                </form>
                </td>
                <td>
                    <form action = "{% url 'cart:delete' %}"> 
                        <button type= 'submit' name='id' value ="{{ cart.id }}" class='btn btn-outline-success'>delete
                    </form>
                </td>
                <td>{{ cart.total_price }}</td>
              </tr>
            {% endfor %}
         
         
        </tbody>
      </table>
      
      전체금액 : {{ total }}
      <button class = 'btn btn-primary' type="submit"  >결제하기</a>
    </form>

    
</div>

{% endblock content %}